<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#8B0000">
  <title>TastyHub — Food Delivery</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root{
      --primary: #8B0000;
      --primary-light: #A52A2A;
      --primary-dark: #660000;
      --accent: #FFD700;
      --bg: #F8F5F5;
      --card: #FFFFFF;
      --text: #2C2C2C;
      --text-light: #666666;
      --muted: #999999;
      --success: #2ECC71;
      --shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
      --shadow-hover: 0 10px 25px rgba(139, 0, 0, 0.15);
      --radius: 16px;
      --font: 'Poppins', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box; margin:0; padding:0}
    html,body{height:100%; width:100%}
    body{
      font-family:var(--font);
      background:var(--bg);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      color:var(--text);
      display:flex;
      justify-content:center;
      align-items:center;
      padding:0;
    }

    /* App container */
    .app{
      width:100%;
      height:100%;
      background:var(--bg);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      position:relative;
    }

    /* Fixed header */
    .fixed-header {
      background: #FFFFFF; /* Changed to white */
      z-index: 1000;
      padding:0 12px 8px 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      position: sticky;
      top: 0;
    }

    /* Header with location and icons */
    .header{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      padding:16px 4px 16px 4px;
      position:relative;
    }
    .header::after{
      content:'';
      position:absolute;
      bottom:0;
      left:0;
      right:0;
      height:1px;
      background:linear-gradient(to right, transparent, rgba(139, 0, 0, 0.1), transparent);
    }
    .location{
      display:flex;
      flex-direction:column;
      gap:6px;
      flex:1;
    }
    .now{
      font-size:13px;
      color:var(--muted);
      font-weight:500;
    }
    .selected{
      display:flex;
      align-items:center;
      gap:8px;
      font-weight:700;
      font-size:20px;
      color:var(--primary-dark);
      cursor: pointer;
    }

    .icons{
      display:flex;
      gap:14px;
      align-items:center;
      margin-left:12px;
    }
    .icon-btn{
      position:relative;
      background:var(--card);
      border-radius:50%;
      width:42px;
      height:42px;
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow:var(--shadow);
      transition:all 0.2s ease;
      border:none;
      cursor:pointer;
    }
    .icon-btn:hover{
      transform:translateY(-2px);
      box-shadow:var(--shadow-hover);
    }
    .icon-btn .dot{
      position:absolute;
      right:8px;
      top:8px;
      width:10px;
      height:10px;
      background:var(--accent);
      border-radius:50%;
      border:2px solid var(--card);
      display: none;
    }
    .icon-btn .dot.show {
      display: block;
    }

    /* Search bar */
    .search{
      display:flex;
      align-items:center;
      gap:12px;
      margin:20px 0 24px 0;
    }
    .search input{
      flex:1;
      padding:16px 20px;
      border-radius:var(--radius);
      background:var(--card);
      border:none;
      box-shadow:var(--shadow);
      font-size:15px;
      font-family:var(--font);
      transition:all 0.2s ease;
    }
    .search input:focus{
      outline:none;
      box-shadow:0 0 0 2px var(--primary-light);
    }
    .search .filter{
      background:var(--primary);
      border-radius:12px;
      width:50px;
      height:50px;
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow:var(--shadow);
      cursor:pointer;
      transition:all 0.2s ease;
      border:none;
    }
    .search .filter:hover{
      background:var(--primary-dark);
      transform:translateY(-2px);
    }
    .search .filter i{
      color:white;
      font-size:18px;
    }

    /* Categories section */
    .categories {
      padding: 16px;
      overflow-x: auto;
      scrollbar-width: none;
      display: flex;
      gap: 16px;
      margin-bottom: 10px;
    }
    
    .categories::-webkit-scrollbar {
      display: none;
    }
    
    .category-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      min-width: 70px;
      cursor: pointer;
      transition: transform 0.2s ease;
    }
    
    .category-item:hover {
      transform: translateY(-3px);
    }
    
    .category-icon {
      width: 60px;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
    }
    
    .category-name {
      font-size: 12px;
      font-weight: 500;
      color: var(--text);
      text-align: center;
    }

    /* Section header */
    .section{
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin:24px 0 16px 0;
      padding:0 16px;
    }
    .section h3{
      margin:0;
      font-size:22px;
      font-weight:700;
      color:var(--primary-dark);
    }
    .section .view-all{
      color:var(--primary);
      font-weight:600;
      font-size:14px;
      display:flex;
      align-items:center;
      gap:4px;
      text-decoration:none;
    }

    /* Horizontal carousel */
    .carousel{
      display:flex;
      gap:16px;
      overflow:auto;
      padding:8px 16px 16px 16px;
      scrollbar-width:none;
    }
    .carousel::-webkit-scrollbar{display:none}

    .card{
      min-width:280px;
      max-width:280px;
      background:var(--card);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
      position:relative;
      transition:all 0.3s ease;
      cursor: pointer;
    }
    .card:hover{
      transform:translateY(-5px);
      box-shadow:var(--shadow-hover);
    }

    .media{
      height:180px;
      background:#f0f0f0;
      position:relative;
      overflow:hidden;
    }
    .media img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      transition:transform 0.5s ease;
    }
    .card:hover .media img{
      transform:scale(1.05);
    }

    .badge-top{
      position:absolute;
      left:12px;
      top:12px;
      padding:6px 12px;
      border-radius:20px;
      color:#fff;
      font-weight:700;
      font-size:12px;
      background:var(--primary);
      z-index:2;
    }
    .badge-top.accent{
      background:var(--accent);
      color:var(--text);
    }

    /* time pill that overlaps card bottom */
    .time-pill{
      position:absolute;
      right:14px;
      bottom:-12px;
      background:var(--card);
      padding:8px 16px;
      border-radius:28px;
      box-shadow:var(--shadow);
      font-weight:800;
      font-size:14px;
      color:var(--primary);
      z-index:2;
      display:flex;
      align-items:center;
      gap:4px;
    }
    .time-pill i{
      color:var(--primary-light);
      font-size:12px;
    }

    .info{
      padding:24px 16px 16px 16px;
    }
    .title{
      font-size:18px;
      font-weight:700;
      margin-bottom:8px;
      color:var(--text);
    }
    .meta{
      display:flex;
      gap:10px;
      align-items:center;
      color:var(--text-light);
      font-size:14px;
      margin-bottom:8px;
    }
    .star{
      color:#FF8C00;
      font-weight:700;
      display:flex;
      align-items:center;
      gap:4px;
    }

    .tags{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      margin-top:12px;
    }
    .tag{
      padding:4px 10px;
      background:rgba(139, 0, 0, 0.08);
      border-radius:12px;
      font-size:12px;
      color:var(--primary);
      font-weight:500;
    }

    /* Subtitle area */
    .subtitle{
      margin:28px 0 16px 0;
      padding:0 16px;
    }
    .title-sm{
      font-weight:700;
      font-size:20px;
      color:var(--primary-dark);
      margin-bottom:6px;
    }
    .subtitle small{
      color:var(--text-light);
      font-size:14px;
    }

    /* bottom navigation */
    .bottom-nav{
      margin-top:auto;
      background:var(--bg);
      padding:14px 0;
      box-shadow:0 -4px 12px rgba(0,0,0,0.06);
      z-index:1000;
      position: fixed;
      bottom: 0;
      width: 100%;
      transition: transform 0.3s ease;
    }
    
    .bottom-nav.hidden {
      transform: translateY(100%);
    }
    
    .nav-inner{
      background:var(--card);
      border-radius:24px;
      padding:12px 24px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      box-shadow:0 8px 30px rgba(10,20,30,0.09);
      margin:0 16px;
    }
    .nav-item{
      display:flex;
      flex-direction:column;
      align-items:center;
      font-size:12px;
      color:var(--muted);
      gap:6px;
      flex:1;
      text-align:center;
      transition:all 0.2s ease;
      cursor:pointer;
      border:none;
      background:none;
      position: relative;
    }
    .nav-item.active{
      color:var(--primary);
      font-weight:700;
    }
    .nav-item:hover{
      color:var(--primary-light);
    }
    .nav-item .icon{
      font-size:20px;
      transition:all 0.2s ease;
    }
    .nav-item.active .icon{
      color:var(--primary);
      transform:translateY(-2px);
    }
    .nav-item .cart-dot {
      position: absolute;
      top: 0;
      right: 8px;
      width: 10px;
      height: 10px;
      background: var(--accent);
      border-radius: 50%;
      display: none;
    }
    .nav-item .cart-dot.show {
      display: block;
    }

    /* Responsive adjustments */
    @media (max-width:420px){
      .app{
        max-width:100%;
        height:100%;
        border-radius:0;
      }
      .card{min-width:260px;max-width:260px}
      .nav-inner{padding:10px 20px}
      .header{padding-bottom:14px}
      .search{margin:16px 0 20px 0}
    }

    /* Animation for cards */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .card {
      animation: fadeIn 0.5s ease forwards;
    }
    
    .card:nth-child(2) {
      animation-delay: 0.1s;
    }
    
    .card:nth-child(3) {
      animation-delay: 0.2s;
    }

    /* Location loading animation */
    .location-loading {
      display: inline-block;
      width: 16px;
      height: 16px;
      border: 2px solid rgba(139, 0, 0, 0.3);
      border-radius: 50%;
      border-top-color: var(--primary);
      animation: spin 1s ease-in-out infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Toast notification */
    .toast {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: var(--primary);
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      z-index: 2000;
      opacity: 0;
      transition: opacity 0.3s ease;
      max-width: 90%;
      text-align: center;
    }
    
    .toast.show {
      opacity: 1;
    }

    /* Location modal */
    .location-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 3000;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
      padding: 20px;
    }
    
    .location-modal.show {
      opacity: 1;
      pointer-events: all;
    }
    
    .modal-content {
      background: white;
      border-radius: var(--radius);
      padding: 24px;
      max-width: 400px;
      width: 100%;
      box-shadow: 0 20px 40px rgba(0,0,0,0.2);
      text-align: center;
    }
    
    .modal-content h3 {
      margin-bottom: 16px;
      color: var(--primary-dark);
    }
    
    .modal-content p {
      margin-bottom: 24px;
      color: var(--text-light);
    }
    
    .modal-buttons {
      display: flex;
      gap: 12px;
      justify-content: center;
    }
    
    .modal-btn {
      padding: 12px 24px;
      border-radius: var(--radius);
      border: none;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .modal-btn.primary {
      background: var(--primary);
      color: white;
    }
    
    .modal-btn.secondary {
      background: #f0f0f0;
      color: var(--text);
    }
    
    .modal-btn:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow);
    }
  </style>
</head>
<body>
  <div class="app" role="main" aria-label="TastyHub Food Delivery">
    <!-- Toast notification -->
    <div class="toast" id="toast"></div>

    <!-- Location modal -->
    <div class="location-modal" id="locationModal">
      <div class="modal-content">
        <h3>تحديد موقعك</h3>
        <p>هل تريد السماح لـ TastyHub بالوصول إلى موقعك الجغرافي لتجربة توصيل أفضل؟</p>
        <div class="modal-buttons">
          <button class="modal-btn secondary" id="cancelLocation">إلغاء</button>
          <button class="modal-btn primary" id="confirmLocation">موافق</button>
        </div>
      </div>
    </div>

    <!-- Fixed header section -->
    <div class="fixed-header" id="fixedHeader">
      <!-- Header -->
      <header class="header">
        <div class="location">
          <div class="now">Delivering to</div>
          <div class="selected" id="locationSelector">
            <span id="locationText">انقر لتحديد موقعك</span> 
            <i class="fa-solid fa-chevron-down" style="font-size:14px"></i>
          </div>
        </div>

     <div class="icons">
    <button class="icon-btn" aria-label="cart" id="cartIcon">
        <i class="fa-solid fa-basket-shopping" style="color:var(--primary);font-size:18px"></i>
        <span class="dot" id="cartDot"></span>
    </button>
    <button class="icon-btn" aria-label="profile" id="profileBtn" onclick="window.location.href='login.html'">
        <i class="fa-regular fa-user" style="color:var(--primary);font-size:18px"></i>
    </button>
</div>
</header>

<!-- Search row -->
<div class="search">
    <input type="search" id="searchInput" placeholder="Search restaurants, groceries, dishes..." aria-label="search" />
    <button class="filter" title="filters">
        <i class="fa-solid fa-sliders"></i>
    </button>
</div>
</div>

    <!-- Main content with scrolling -->
    <div style="overflow-y: auto; flex: 1; padding-top: 10px;" id="mainContent">
      <!-- Categories section -->
      <div class="categories">
        <div class="category-item" data-category="pizza">
          <div class="category-icon" style="background-image: url('https://png.pngtree.com/png-clipart/20231020/original/pngtree-illustration-of-burger-cartoon-png-image_13373633.png')"></div>
          <div class="category-name">Pizza</div>
        </div>
        <div class="category-item" data-category="burgers">
          <div class="category-icon" style="background-image: url('https://png.pngtree.com/png-clipart/20231020/original/pngtree-illustration-of-burger-cartoon-png-image_13373633.png')"></div>
          <div class="category-name">Burgers</div>
        </div>
        <div class="category-item" data-category="sushi">
          <div class="category-icon" style="background-image: url('https://png.pngtree.com/png-clipart/20231020/original/pngtree-illustration-of-burger-cartoon-png-image_13373633.png')"></div>
          <div class="category-name">Sushi</div>
        </div>
        <div class="category-item" data-category="pasta">
          <div class="category-icon" style="background-image: url('https://png.pngtree.com/png-clipart/20231020/original/pngtree-illustration-of-burger-cartoon-png-image_13373633.png')"></div>
          <div class="category-name">Pasta</div>
        </div>
        <div class="category-item" data-category="healthy">
          <div class="category-icon" style="background-image: url('https://png.pngtree.com/png-clipart/20231020/original/pngtree-illustration-of-burger-cartoon-png-image_13373633.png')"></div>
          <div class="category-name">Healthy</div>
        </div>
        <div class="category-item" data-category="desserts">
          <div class="category-icon" style="background-image: url('https://png.pngtree.com/png-clipart/20231020/original/pngtree-illustration-of-burger-cartoon-png-image_13373633.png')"></div>
          <div class="category-name">Desserts</div>
        </div>
      </div>

      <!-- Meal Deals Section -->
      <section class="section">
        <h3>Featured Restaurants</h3>
        <a href="#" class="view-all">View all <i class="fa-solid fa-chevron-right" style="font-size:12px"></i></a>
      </section>

      <div class="carousel" aria-label="featured restaurants carousel">

        <!-- Card 1 - McDonald's -->
        <article class="card" data-link="menukfc.html">
          <div class="media">
            <img src="https://www.livraisonplus.ma/web/image/527-0c1fabaa/1000036792.jpg" alt="McDonald's restaurant" />
            <div class="badge-top">Popular</div>
            <div class="time-pill"><i class="fa-solid fa-clock"></i> 10 min</div>
          </div>
          <div class="info">
            <div class="title">McDonald's</div>
            <div class="meta">
              <span class="star"><i class="fa-solid fa-star"></i> 4.6</span>
              <span>• American • Fast Food</span>
            </div>
            <div class="tags">
              <span class="tag">Burgers</span>
              <span class="tag">Fries</span>
              <span class="tag">$</span>
            </div>
          </div>
        </article>

        <!-- Card 2 -->
        <article class="card" data-link="pizzahutmenu.html">
          <div class="media">
            <img src="https://www.yum.com/wps/wcm/connect/yumbrands/77ac5d27-1357-4792-9953-54b11f5ae7dd/yum-com-24-product-PH.jpg?MOD=AJPERES&CACHEID=ROOTWORKSPACE.Z18_5QC4HBC039RJ406SQH4UBH3695-77ac5d27-1357-4792-9953-54b11f5ae7dd-oXSxcXb" alt="Pizza restaurant" />
            <div class="badge-top">New</div>
            <div class="time-pill"><i class="fa-solid fa-clock"></i> 15 min</div>
          </div>
          <div class="info">
            <div class="title"> Pizza hut</div>
            <div class="meta">
              <span class="star"><i class="fa-solid fa-star"></i> 4.8</span>
              <span>• Italian • Pizza</span>
            </div>
            <div class="tags">
              <span class="tag">Pizza</span>
              <span class="tag">Pasta</span>
              <span class="tag">$$</span>
            </div>
          </div>
        </article>

        <!-- Card 3 -->
        <article class="card" data-link="tokyosushi.html">
          <div class="media">
            <img src="https://images.unsplash.com/photo-1467003909585-2f8a72700288?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Sushi restaurant" />
            <div class="badge-top accent">Deal</div>
            <div class="time-pill"><i class="fa-solid fa-clock"></i> 20 min</div>
          </div>
          <div class="info">
            <div class="title">Tokyo Sushi</div>
            <div class="meta">
              <span class="star"><i class="fa-solid fa-star"></i> 4.7</span>
              <span>• Japanese • Sushi</span>
            </div>
            <div class="tags">
              <span class="tag">Sushi</span>
              <span class="tag">Ramen</span>
              <span class="tag">$$$</span>
            </div>
          </div>
        </article>

      </div>

      <!-- Subtitle area -->
      <div class="subtitle">
        <div class="title-sm">Today's Specials</div>
        <small>Curated selections just for you</small>
      </div>

      <!-- Second carousel -->
      <div class="carousel" aria-label="specials carousel">

        <article class="card" data-link="gourmetburger.html">
          <div class="media">
            <img src="https://images.unsplash.com/photo-1551782450-a2132b4ba21d?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Burger meal" />
            <div class="badge-top">Limited</div>
            <div class="time-pill"><i class="fa-solid fa-clock"></i> 12 min</div>
          </div>
          <div class="info">
            <div class="title">Gourmet Burger</div>
            <div class="meta">
              <span class="star"><i class="fa-solid fa-star"></i> 4.9</span>
              <span>• American • Burger</span>
            </div>
            <div class="tags">
              <span class="tag">Combo</span>
              <span class="tag">Family Meal</span>
            </div>
          </div>
        </article>

        <article class="card" data-link="pastaparadise.html">
          <div class="media">
            <img src="https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Pasta dish" />
            <div class="badge-top accent">-20%</div>
            <div class="time-pill"><i class="fa-solid fa-clock"></i> 18 min</div>
          </div>
          <div class="info">
            <div class="title">Pasta Paradise</div>
            <div class="meta">
              <span class="star"><i class="fa-solid fa-star"></i> 4.7</span>
              <span>• Italian • Pasta</span>
            </div>
            <div class="tags">
              <span class="tag">Pasta</span>
              <span class="tag">Garlic Bread</span>
            </div>
          </div>
        </article>

        <article class="card" data-link="greengarden.html">
          <div class="media">
            <img src="https://images.unsplash.com/photo-1563245372-f21724e3856d?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Salad bowl" />
            <div class="badge-top">Healthy</div>
            <div class="time-pill"><i class="fa-solid fa-clock"></i> 15 min</div>
          </div>
          <div class="info">
            <div class="title">Green Garden</div>
            <div class="meta">
              <span class="star"><i class="fa-solid fa-star"></i> 4.5</span>
              <span>• Healthy • Salad</span>
            </div>
            <div class="tags">
              <span class="tag">Vegan</span>
              <span class="tag">Gluten-Free</span>
            </div>
          </div>
        </article>

      </div>
    </div>

    <!-- Bottom navigation -->
    <nav class="bottom-nav" aria-label="Main navigation" id="bottomNav">
      <div class="nav-inner">
        <button class="nav-item active">
          <div class="icon"><i class="fa-solid fa-house"></i></div>
          <div class="label">Home</div>
        </button>
        <button class="nav-item">
          <div class="icon"><i class="fa-solid fa-utensils"></i></div>
          <div class="label">Dining</div>
        </button>
        <button class="nav-item" id="cartButton">
          <div class="icon"><i class="fa-solid fa-basket-shopping"></i></div>
          <div class="label">Cart</div>
          <span class="cart-dot" id="cartNavDot"></span>
        </button>
        <button class="nav-item">
          <div class="icon"><i class="fa-regular fa-user"></i></div>
          <div class="label">Profile</div>
        </button>
      </div>
    </nav>
  </div>

  <script>
    // Card interaction
    document.querySelectorAll('.card').forEach(card => {
      card.addEventListener('click', () => {
        const link = card.getAttribute('data-link');
        if (link) {
          window.location.href = link;
        }
        
        card.style.transform = 'translateY(-6px)';
        card.style.transition = 'transform 180ms ease';
        setTimeout(()=> card.style.transform = '',260);
      });
    });

    // Make carousels drag-scroll on desktop like mobile
    document.querySelectorAll('.carousel').forEach(car => {
      let isDown=false,startX,scrollLeft;
      car.addEventListener('mousedown',e=>{isDown=true;car.classList.add('active');startX=e.pageX - car.offsetLeft;scrollLeft=car.scrollLeft});
      car.addEventListener('mouseleave',()=>{isDown=false;car.classList.remove('active')});
      car.addEventListener('mouseup',()=>{isDown=false;car.classList.remove('active')});
      car.addEventListener('mousemove',e=>{if(!isDown) return; e.preventDefault(); const x=e.pageX - car.offsetLeft; const walk=(x - startX)*1.2; car.scrollLeft = scrollLeft - walk;});
    });

    // Improve touch scrolling UX
    document.querySelectorAll('.carousel').forEach(s => { s.addEventListener('touchmove', e => {}, {passive:true}) });

    // Navigation interaction
    document.querySelectorAll('.nav-item').forEach(item => {
      item.addEventListener('click', function() {
        document.querySelector('.nav-item.active').classList.remove('active');
        this.classList.add('active');
      });
    });

    // Toast notification function
    function showToast(message, duration = 3000) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      
      setTimeout(() => {
        toast.classList.remove('show');
      }, duration);
    }

    // Location modal functionality
    const locationModal = document.getElementById('locationModal');
    const cancelLocationBtn = document.getElementById('cancelLocation');
    const confirmLocationBtn = document.getElementById('confirmLocation');
    const locationSelector = document.getElementById('locationSelector');
    const locationText = document.getElementById('locationText');
    
    // Show modal when clicking on location selector
    locationSelector.addEventListener('click', () => {
      locationModal.classList.add('show');
    });
    
    // Close modal when clicking cancel
    cancelLocationBtn.addEventListener('click', () => {
      locationModal.classList.remove('show');
    });
    
    // Get location when confirming
    confirmLocationBtn.addEventListener('click', () => {
      locationModal.classList.remove('show');
      getCurrentLocation();
    });
    
    // Function to get current location
    function getCurrentLocation() {
      if (!navigator.geolocation) {
        showToast("المتصفح لا يدعم تحديد الموقع", 3000);
        return;
      }
      
      // Show loading state
      locationText.innerHTML = '<span class="location-loading"></span> جاري تحديد الموقع...';
      
      // Get current position
      navigator.geolocation.getCurrentPosition(
        async (position) => {
          // Success: Get the coordinates
          const { latitude, longitude } = position.coords;
          
          // In a real app, you would reverse geocode these coordinates to get an address
          // For this example, we'll simulate getting a location name
          setTimeout(() => {
            const locations = ["وسط البلد", "المنطقة الشمالية", "الضاحية الشرقية", "حي الأندلس", "وسط المدينة"];
            const randomLocation = locations[Math.floor(Math.random() * locations.length)];
            locationText.textContent = randomLocation;
            showToast(`تم تحديد موقعك: ${randomLocation}`, 2000);
            
            // Store location in localStorage for future visits
            localStorage.setItem('userLocation', randomLocation);
            localStorage.setItem('userCoords', JSON.stringify({ lat: latitude, lon: longitude }));
          }, 1500);
        },
        (error) => {
          // Error handling
          let errorMessage = "فشل في تحديد الموقع";
          
          switch(error.code) {
            case error.PERMISSION_DENIED:
              errorMessage = "تم رفض الإذن لتحديد الموقع";
              break;
            case error.POSITION_UNAVAILABLE:
              errorMessage = "معلومات الموقع غير متوفرة";
              break;
            case error.TIMEOUT:
              errorMessage = "انتهت مهلة طلب الموقع";
              break;
          }
          
          locationText.textContent = errorMessage;
          showToast(errorMessage, 3000);
          
          // Check if we have a previously stored location
          const storedLocation = localStorage.getItem('userLocation');
          if (storedLocation) {
            setTimeout(() => {
              locationText.textContent = storedLocation;
            }, 2000);
          }
        },
        {
          enableHighAccuracy: true,
          timeout: 10000,
          maximumAge: 300000 // 5 minutes
        }
      );
    }
    
    // Check if we have a stored location from previous visit
    window.addEventListener('load', () => {
      const storedLocation = localStorage.getItem('userLocation');
      if (storedLocation) {
        locationText.textContent = storedLocation;
      }
    });

    // Search functionality
    const searchInput = document.getElementById('searchInput');
    
    searchInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        const searchTerm = searchInput.value.trim();
        if (searchTerm) {
          // In a real app, this would search through your content
          showToast(`جاري البحث عن: ${searchTerm}`);
          
          // Here you would implement actual search logic
          // For example, filtering cards that match the search term
          searchContent(searchTerm);
        }
      }
    });

    // Simple search function to demonstrate functionality
    function searchContent(term) {
      const cards = document.querySelectorAll('.card');
      let foundResults = false;
      const searchTerm = term.toLowerCase();
      
      cards.forEach(card => {
        const title = card.querySelector('.title').textContent.toLowerCase();
        const tags = card.querySelectorAll('.tag');
        let tagText = '';
        
        tags.forEach(tag => {
          tagText += tag.textContent.toLowerCase() + ' ';
        });
        
        // Check if the card matches the search term
        if (title.includes(searchTerm) || tagText.includes(searchTerm)) {
          card.style.display = 'block';
          foundResults = true;
          
          // Highlight the matching card
          card.style.boxShadow = '0 0 0 2px var(--accent)';
          setTimeout(() => {
            card.style.boxShadow = '';
          }, 2000);
        } else {
          card.style.display = 'none';
        }
      });
      
      if (!foundResults) {
        showToast('لا توجد نتائج للبحث عن: ' + term, 2000);
        
        // Reset display after alert
        setTimeout(() => {
          cards.forEach(card => {
            card.style.display = 'block';
          });
        }, 100);
      }
    }

    // Cart redirection functionality
    document.getElementById('cartIcon').addEventListener('click', function() {
      window.location.href = 'checkout.html';
    });

    document.getElementById('cartButton').addEventListener('click', function() {
      window.location.href = 'checkout.html';
    });

    // Cart functionality
    const cartDot = document.getElementById('cartDot');
    const cartNavDot = document.getElementById('cartNavDot');
    
    // Function to update cart indicator
    function updateCartIndicator() {
      const cartItems = JSON.parse(localStorage.getItem('cartItems') || '[]');
      
      if (cartItems.length > 0) {
        cartDot.classList.add('show');
        cartNavDot.classList.add('show');
      } else {
        cartDot.classList.remove('show');
        cartNavDot.classList.remove('show');
      }
    }
    
    // Initialize cart indicator on page load
    window.addEventListener('load', function() {
      updateCartIndicator();
    });
    
    // Hide/show bottom navbar on scroll
    const bottomNav = document.getElementById('bottomNav');
    const mainContent = document.getElementById('mainContent');
    let lastScrollTop = 0;
    
    mainContent.addEventListener('scroll', function() {
      let scrollTop = this.scrollTop;
      
      if (scrollTop > lastScrollTop && scrollTop > 100) {
        // Scrolling down - hide navbar
        bottomNav.classList.add('hidden');
      } else {
        // Scrolling up - show navbar
        bottomNav.classList.remove('hidden');
      }
      
      lastScrollTop = scrollTop;
    });
  </script>
</body>
</html>
